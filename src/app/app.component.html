<mat-sidenav-container fullscreen >
  <mat-sidenav #sidenav mode="side" opened>
    <!-- Sidebar buttons -->
    <div class="sidebar-buttons">
      <br>
      <button mat-mini-fab color="primary" (click)="addLocalTerminal()" aria-label="Add Local Terminal">
        <mat-icon>terminal</mat-icon>
      </button>
      <button mat-mini-fab color="primary" (click)="addMenu()" aria-label="Add Profile">
        <mat-icon>add</mat-icon>
      </button>
      <button mat-mini-fab color="primary" (click)="favoriteMenu()" aria-label="Favorite">
        <mat-icon>favorite</mat-icon>
      </button>
      <button mat-mini-fab color="primary" (click)="secureMenu()" aria-label="Save">
        <mat-icon>password</mat-icon>
      </button>
      <button mat-mini-fab color="primary" (click)="cloudMenu()" aria-label="Cloud">
        <mat-icon>cloud</mat-icon>
      </button>

      <button mat-mini-fab color="primary" (click)="settingMenu()" aria-label="Settings">
        <mat-icon>settings</mat-icon>
      </button>
    </div>
  </mat-sidenav>

  <mat-sidenav-content>
    <mat-tab-group id="tab-group" [selectedIndex]="tabService.currentTabIndex">
      @for (tab of tabService.tabs; let i = $index; track tab.id) {
      <mat-tab>
        <ng-template mat-tab-label>
          <div class="tab-label">
            <span>{{ getTabName(tab) }} </span>
              <button mat-icon-button (click)="removeTab(i)" aria-label="Remove tab">
                <mat-icon>close</mat-icon>
              </button>
            </div>
          </ng-template>
          <div>
          @switch(tab.category) {
            @case('TERMINAL') {
              <app-terminal [tabId]="tab.id"></app-terminal>
            }
            @case('REMOTE_DESKTOP') {
              <app-remote-desktop [tab]="tab"></app-remote-desktop>
            }
            @case('FILE_EXPLORER') {
              <app-file-explorer [tab]="tab"></app-file-explorer>
            }
          }
          </div>
        </mat-tab>
      }
    </mat-tab-group>

    @if (modalControl.isMenuModalOpen) {
    <div>
      @switch(modalControl.currentOpenedMenu) {
        @case('add') {
      <!-- Menu components based on the switch case -->
          <app-quickconnect-menu [@slideInOut]="'in'" (closeEvent)="modalControl.closeModal('add')"></app-quickconnect-menu>
        }
        @case('favorite') {
          <app-profiles-menu [@slideInOut]="'in'"  (closeEvent)="modalControl.closeModal('favorite', true)"></app-profiles-menu>
        }
        @case('secure') {
          <app-secures-menu [@slideInOut]="'in'" (closeEvent)="modalControl.closeModal('secure', true)"></app-secures-menu>
        }
        @case('cloud') {
        <app-cloud-menu [@slideInOut]="'in'" (closeEvent)="modalControl.closeModal('cloud')"></app-cloud-menu>
        }
        @case('setting') {
          <app-setting-menu [@slideInOut]="'in'" (closeEvent)="modalControl.closeModal('setting')"></app-setting-menu>
        }
      }
    </div>
    }
  </mat-sidenav-content>
</mat-sidenav-container>
<ngx-spinner bdColor = "rgba(0, 0, 0, 0.8)" size = "medium" color = "#fff" type = "ball-scale-multiple" [fullScreen] = "true"><p style="color: white" > Loading... </p></ngx-spinner>
